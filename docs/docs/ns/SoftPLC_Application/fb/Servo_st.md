# Garden Watering | [MAIN] | [NAMESPACES] | [METRICS] | [BACK]  

## Documentation for Function block Servo  

```pascal
INTERFACE
    VAR_INPUT
        CmdFwd : BOOL; (**)
        CmdRev : BOOL; (**)
        PulseWidth : TIME; (* Width of a pulse from the hall effect sensor when its above magnetic surface *)
    END_VAR
    VAR_OUTPUT
        S1 : BOOL; (**)
        S2 : BOOL; (**)
    END_VAR
    VAR
        tofS2 : TOF; (**)
        tonS2 : TON; (**)
        blink : BLINK; (**)
        blinkOld : BOOL; (**)
        vStartBlinker : BOOL; (**)
    END_VAR
END_INTERFACE
FUNCTION_BLOCK Servo:
    vStartBlinker := (CmdFwd OR CmdRev) AND NOT (CmdFwd AND CmdRev);
Blink(ENABLE := vStartBlinker, TIMELOW:= PulseWidth, TIMEHIGH := PulseWidth);

tonS2(IN := blink.OUT, PT:=PulseWidth/2);
tofS2(IN := NOT tonS2.Q AND blinkOld, PT:=PulseWidth/2);
 
blinkOld := tonS2.Q;

IF CmdFwd THEN
	S1 := blink.OUT;
	S2 := tonS2.Q OR tofS2.Q;
ELSIF CmdRev THEN
	S1 := tonS2.Q OR tofS2.Q;
	S2 := blink.OUT;
END_IF
END_FUNCTION_BLOCK
```

## Metrics  

| VAR_IN | VAR_OUT | VAR_IN_OUT | VAR_LOCAL | VAR_EXTERNAL | VAR_TEMP | Actions | Lines of code | Maintainable size |
| ------ | ------- | ---------- | --------- | ------------ | -------- | ------- | ------------- | ----------------- |
| 3 | 2 | 0 | 5 | 0 | 0 | 0 | 15 | 30 |  

---
Autogenerated with [ia_tools](https://github.com/tkucic/ia_tools)  

[MAIN]: ../../../../index_st.md
[NAMESPACES]: ../../nsList_st.md
[METRICS]: ../../../metrics_st.md
[BACK]: ../nsMain_st.md
